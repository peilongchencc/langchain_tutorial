# Milvus

Milvus is a database that stores, indexes, and manages massive embedding vectors generated by deep neural networks and other machine learning (ML) models. <br>

Milvus 是一个数据库，用于存储、索引和管理由深度神经网络和其他机器学习（ML）模型生成的大规模嵌入向量。<br>

This notebook shows how to use functionality related to the Milvus vector database.<br>

这个笔记本展示了如何使用与 Milvus 向量数据库相关的功能。<br>

To run, you should have a Milvus instance up and running.<br>

🔥🔥🔥要运行，您应该有一个已启动和运行的 Milvus 实例。<br>

## Compartmentalize the data with Milvus Collections(用Milvus集合对数据进行分隔):

You can store different unrelated documents in different collections within the same Milvus instance to maintain the context.<br>

您可以在同一个 Milvus 实例中的不同集合中存储不相关的文档，以保持上下文。<br>

Here’s how you can create a new collection.<br>

下面是如何创建一个新集合的方法。<br>

```python
vector_db = Milvus.from_documents(
    docs,
    embeddings,
    collection_name="collection_1",
    connection_args={"host": "127.0.0.1", "port": "19530"},
)
```

> 如何定义collection的结构，加上来源字段？

And here is how you retrieve that stored collection(以下是如何检索存储的集合):<br>

```python
vector_db = Milvus(
    embeddings,
    connection_args={"host": "127.0.0.1", "port": "19530"},
    collection_name="collection_1",
)
```

After retrieval you can go on querying it as usual.<br>

检索后，您可以像往常一样继续查询它。<br>


## Per-User Retrieval(用户检索):

When building a retrieval app, you often have to build it with multiple users in mind.<br>

当构建检索应用程序时，通常需要考虑多个用户。<br>

This means that you may be storing data not just for one user, but for many different users, and they should not be able to see each other’s data.<br>

这意味着您可能不仅为一个用户存储数据，而是为许多不同的用户存储数据，他们不应该能够看到彼此的数据。<br>

Milvus recommends using partition_key to implement multi-tenancy, here is an example.<br>

Milvus 建议使用 partition_key 实现多租户，这里有一个示例。<br>

```python
from langchain_core.documents import Document

docs = [
    Document(page_content="i worked at kensho", metadata={"namespace": "harrison"}),
    Document(page_content="i worked at facebook", metadata={"namespace": "ankush"}),
]
vectorstore = Milvus.from_documents(
    docs,
    embeddings,
    connection_args={"host": "127.0.0.1", "port": "19530"},
    drop_old=True,
    partition_key_field="namespace",  # Use the "namespace" field as the partition key
)
```

> milvus一个集合内最多支持4096个分区。



在Markdown文档中，要创建一个可点击的链接，让用户点击就可以跳转到另一个网页，你可以使用以下的语法：

```markdown
[链接文字](网址)
```

例如，如果你想创建一个指向 Google 的链接，你可以这样写：

```markdown
[访问谷歌](https://www.google.com)
```

这样，当用户点击“访问谷歌”时，就会跳转到 Google 的首页。这种格式适用于大多数Markdown编辑器和解析器，非常方便用于添加外部资源或引用。